[killedJobs]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
search = `jobKillingNodes` | dedup job htime
vsid = go4np8wu

[nodeStateCounts]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index=summary from nids | dedup _time | reverse | nointerpolate | chart max(USR) AS ProductionUptime max(SYS) AS ScheduledDowntime max(ERR) AS UnscheduledDowntime by _time
vsid = *:go4rk0rj

[systemHoursYesterday]
action.email.inline = 1
action.email.reportServerEnabled = 0
action.summary_index = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 30 5 * * *
displayview = flashtimeline
enableSched = 1
realtime_schedule = 0
request.ui_dispatch_view = flashtimeline
search = `systemHoursYesterday()`
vsid = gn0jm1pu

[StateChange]
action.email.inline = 1
action.email.reportServerEnabled = 0
action.summary_index = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 45 */4 * * *
displayview = flashtimeline
enableSched = 1
realtime_schedule = 0
request.ui_dispatch_view = flashtimeline
search = [search index=summary StateName | head 1 | eval query="(_time="._time." index=summary StateName) OR (_time>"._time." tag=state)" | fields + query] | tail 50000 | lookup nodes node OUTPUT nid | statechange
vsid = go4s3dlv

[JMTTI]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 0 6 * * *
displayview = report_builder_display
enableSched = 1
request.ui_dispatch_view = report_builder_display
search = `jmtti` | timechart span=1d max(JMTTI) as JMTTI
vsid = *:go4r7kjf

[EL]
action.email.inline = 1
alert.suppress = 0
alert.suppress.period = h
cron_schedule = 0 6 * * *
dispatch.earliest_time = 
enableSched = 1

[SMTTI]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 0 6 * * *
displayview = report_builder_display
enableSched = 1
request.ui_dispatch_view = report_builder_display
search = `smtti` | timechart span=1d max(SMTTI) as SMTTI
vsid = *:go4r17yc

[systemStateHours]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 0 6 * * *
displayview = report_builder_display
enableSched = 1
request.ui_dispatch_view = report_builder_display
search = index=summary USRhoursToday | timechart span=1d max(USRhoursToday) AS ProductionUptime max(SYShoursToday) AS ScheduledDowntime max(ERRhoursToday) AS UnscheduledDowntime
vsid = *:gokk8h4e

[DailySummary]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
search = index=summary USRHoursToday | join type=outer _time [search index=summary tag=sysstate from=USR to=ERR | timechart span=1d count AS systemInterrupts | eval SystemInterrupts=if(systemInterrupts=0,null(),systemInterrupts)] | join type=outer _time [search `jobKillingNodes` | timechart span=1d dc(job) AS jobInterrupts | eval JobInterrupts=if(jobInterrupts=0,null(),jobInterrupts)] | eval ProductionUptime=if(USRhoursToday=0,null(),USRhoursToday) | eval ScheduledDowntime=if(SYShoursToday=0,null(),SYShoursToday) | eval UnscheduledDowntime=if(ERRhoursToday=0,null(),ERRhoursToday) | sort _time | eval Date=strftime(_time,"%D") | table Date ProductionUptime ScheduledDowntime UnscheduledDowntime SystemInterrupts JobInterrupts
vsid = govjma1w

[DownNodes]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.track = 1
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
search = `downNodes(300)`
vsid = gqdy9han

[NodeDownsPerNode]
action.email.inline = 1
alert.suppress = 0
alert.track = 1
displayview = flashtimeline
search = `NodeDownsPerNode(30)`
vsid = *:49af8l71

[updateJobeLookup]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.expires = 4h
alert.suppress = 0
alert.track = 1
cron_schedule = 0 5 * * *
displayview = flashtimeline
enableSched = 1
request.ui_dispatch_view = flashtimeline
search = [ | inputlookup max=999999999 jobe | head 1 | eval query="sourcetype=moabs nids=* (etype=jobstart OR etype=jobend OR etype=jobcancel) _time>" . time | fields + query ] | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | dedup job start etype | eval time=if(etype=="JOBSTART",start,end) | eval htime=strftime(time, "%Y-%m-%d %H:%M:%S") | eval job=if(etype=="JOBSTART",job,null()) | eval user=if(etype=="JOBSTART",user,null()) | eval nnodes=if(etype=="JOBSTART",nnodes,null()) | lookup hostlist short AS nids OUTPUT long AS nid | makemv delim="," nid | mvexpand nid | fields + htime,time,nid,job,user,nnodes | inputlookup append=true max=999999999 jobe | outputlookup max=999999999 jobe
vsid = go2v9131

[resetJobeLookup]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.track = 1
cron_schedule = 45 2 1 * *
description = jobe lookup table associates nodes with jobs actually running on them
dispatch.earliest_time = -3mon@mon
displayview = flashtimeline
enableSched = 1
request.ui_dispatch_view = flashtimeline
search = sourcetype=moabs nids=* (etype=jobstart OR etype=jobend OR etype=jobcancel) | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | dedup job start etype | eval time=if(etype=="JOBSTART",start,end) | eval htime=strftime(time, "%Y-%m-%d %H:%M:%S") | eval job=if(etype=="JOBSTART",job,null()) | eval user=if(etype=="JOBSTART",user,null()) | eval nnodes=if(etype=="JOBSTART",nnodes,null()) | lookup hostlist short AS nids OUTPUT long AS nid | makemv delim="," nid | mvexpand nid | fields + htime,time,nid,job,user,nnodes | outputlookup max=999999999 jobe
vsid = go230a1w

[NodeDownsPerDay]
action.email.inline = 1
alert.suppress = 0
alert.track = 1
dispatch.earliest_time = -30d
displayview = flashtimeline
search = index=summary to=err | timechart span=1d dc(nid) AS DistinctNodesDown count AS TotalNodeDownEvents  | sort -_time | eval date=strftime(_time,"%m/%d/%y") | table date DistinctNodesDown TotalNodeDownEvents
vsid = *:l78aqh43

[updateJobsLookup]
alert.expires = 4h
alert.suppress.period = 
alert.track = 1
cron_schedule = 15 */4 * * *
description = Update jobs lookup with jobs since it was last written
search = [ | inputlookup max=999999999 jobs | head 1 | eval query="etype=jobstart start>" . start | fields + query | format] | eval starttime=strftime(start, "%Y-%m-%d %H:%M:%S") | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | lookup hostlist short AS nids OUTPUT long AS nid | makemv delim="," nid | mvexpand nid | fields +  starttime,start,job,user,nid,nnodes  | inputlookup append=true max=999999999 jobs | outputlookup max=999999999 jobs.csv.gz
vsid = gm54qwwy

[resetJobsLookup]
action.email.reportServerEnabled = 0
alert.suppress.period = 
alert.track = 1
cron_schedule = 2 1 1 * *
request.ui_dispatch_view = flashtimeline
search = etype=jobstart | eval starttime=strftime(start, "%Y-%m-%d %H:%M:%S") | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | lookup hostlist short AS nids OUTPUT long AS nid | makemv delim="," nid | mvexpand nid | fields +  starttime,start,job,user,nid,nnodes | outputlookup max=999999999 jobs
vsid = gm5efjlx

[Alerts: by type,user,job]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs nid OUTPUT user,job | stats count by eventtype,user,job | sort -job
cron_schedule = No value selected
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -3d@h
vsid = g80h9n5u

[Alerts: by type/user: piechart]
search = daysago=3 tag=alert | lookup jobs nid OUTPUT user,job | eval typeuser=eventtype."/".user | chart distinct_count(job) as jobs by typeuser
cron_schedule = No value selected
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -72h@h
vsid = *:g87t016n

[Alerts: type/user: jobcount piechart]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs nid OUTPUT user,job  | eval typeuser=eventtype."/".user | chart distinct_count(job) by typeuser
cron_schedule = No value selected
dispatch.latest_time = now
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g87vpytz

[Alerts: type/user: nodecount piechart]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs nid OUTPUT user,job  | eval typeuser=eventtype."/".user | chart distinct_count(host) by typeuser
cron_schedule = No value selected
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g8ajbtlq
