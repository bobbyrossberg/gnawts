[default]

[Alerts by host/type/user piechart]
search = tag=alert | lookup jobs node AS host OUTPUT user,job | eval hosttypeuser=host."/".eventtype."/".user | chart count by hosttypeuser
cron_schedule = No value selected
dispatch.latest_time = now
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g83itay1

[Alerts: by type,user,job]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs node AS host OUTPUT user,job | stats count by eventtype,user,job | sort -job
cron_schedule = No value selected
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -3d@h
vsid = g80h9n5u

[Alerts: by type/user: piechart]
search = daysago=3 tag=alert | lookup jobs node AS host OUTPUT user,job | eval typeuser=eventtype."/".user | chart distinct_count(job) as jobs by typeuser
cron_schedule = No value selected
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -72h@h
vsid = *:g87t016n

[Alerts: type/user: jobcount piechart]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs node AS host OUTPUT user,job  | eval typeuser=eventtype."/".user | chart distinct_count(job) by typeuser
cron_schedule = No value selected
dispatch.latest_time = now
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g87vpytz

[Alerts: type/user: nodecount piechart]
search = tag=alert | eval eventtype=if(isint(rc),eventtype.rc,eventtype) | lookup jobs node AS host OUTPUT user,job  | eval typeuser=eventtype."/".user | chart distinct_count(host) by typeuser
cron_schedule = No value selected
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g8ajbtlq

[Indexing workload]
dispatch.lookups = 1
dispatch.spawn_process = 1
vsid = *:draenoep

[Reservations:Names]
is_visible = 1
search = daysago=60 sourcetype=moabs otype=rsv | ctable etype id
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
dispatch.earliest_time = -90d@d
vsid = *:z3sodp2c

[alerts: host vs type]
search = tag="alert" | ctable host eventtype
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g2xudhzu
action.email.sendresults = 0
description = Table of host vs alert type

[alerts: host vs user]
search = tag=alert | ctable host user
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g2z4t3y8
action.email.sendresults = 0

[alerts: host/type/user]
search = daysago=3 tag=alert | eval typeuser=host."/".eventtype."/".user | timechart count by typeuser
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g3hpheze
action.email.sendresults = 0
description = Alerts grouped by host/type/user over last three days

[alerts: node/type]
search = tag=alert | eval hosttype=host."/".eventtype | timechart count by hosttype
cron_schedule = */5 * * * *
dispatch.latest_time = +0s
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
dispatch.earliest_time = -3d@h
vsid = *:g3hgjtxd
action.email.sendresults = 0
description = Alerts grouped by node/type for last three days

[alerts: user vs type]
search = tag="alert" | ctable user eventtype
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g2z4xtxq
action.email.sendresults = 0

[joblog: name vs JobState]
search = sourcetype=slurmj | ctable name JobState
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g2z4u7zy
action.email.sendresults = 0

[joblog: name vs user]
search = sourcetype=slurmj | ctable name user
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g2z4upte
action.email.sendresults = 0

[joblog: user vs JobState]
search = sourcetype=slurmj NOT JobState=completed| ctable user JobState
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@d
vsid = g2z4v6bw
action.email.sendresults = 0
description = Unsucessful jobs, by user

[node up/down]
search = sourcetype=moabs otype=node | ctable node etype
cron_schedule = No value selected
dispatch.latest_time = +0s
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
dispatch.earliest_time = -7d@h
vsid = g309p21m
action.email.sendresults = 0

[read-only file system]
action.email = 1
action.email.sendresults = 1
action.email.to = redsky-admin@mailgate.sandia.gov
counttype = number of events
cron_schedule = 0 5 * * *
description = File systems mounted read-only on Lustre service nodes during previous 24 hours
dispatch.earliest_time = -1d
enableSched = 1
quantity = 0
relation = greater than
search = (mds OR oss ) AND Remounting filesystem read-only

[Chatty host (by day)]
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = earliest=-0h@h | stats count by host date_hour | append [search index=summary search_name=hourlyCountByHost earliest=-0d@d | eval host=orig_host] | append [ search index=summary search_name=dailyCountByHost earliest=-7d@d | eval host=orig_host ] | timechart span=1d sum(count) by host
vsid = *:gl00t0kr

[SilentHosts]
description = hosts silent for more than an hour but less than a week
displayview = flashtimeline
request.ui_dispatch_view = flashtimeline
search = | metadata type=hosts | eval hoursAgo=round((now()-lastTime)/3600,1) | search hoursAgo<7 hoursAgo>1 | sort -lastTime | convert timeformat="%Y-%m-%d %H:%M:%S" ctime(lastTime) as lastHeardFrom | table host,lastHeardFrom,hoursAgo
vsid = gl2mzxki

[Chatty host (by hour)]
cron_schedule = 5 * * * *
displayview = report_builder_display
enableSched = 1
request.ui_dispatch_view = report_builder_display
search = sourcetype=syslog earliest=-0h@h | stats count by host date_hour | append [search index=summary search_name=hourlyCountByHost earliest=-24h | eval host=orig_host] | timechart span=1h sum(count) by host
vsid = *:gl00v7z8

[LoudHosts]
cron_schedule = 5 * * * *
description = louder than usual hosts (today's count minus the weekly median)
displayview = flashtimeline
enableSched = 1
request.ui_dispatch_view = flashtimeline
search = index=summary search_name=hourlyCountByHost earliest=-24h | stats sum(count) as today by orig_host | join orig_host [search index=summary search_name=dailyCountByHost earliest=-14d | stats median(count) as median by orig_host] | eval delta=today-median | eval host=orig_host | sort -delta -today | table host,today,median,delta
vsid = gl2nfy5a

[QuietHosts]
cron_schedule = 5 * * * *
description = hosts quiet for more than a day but less than a week
displayview = flashtimeline
enableSched = 1
request.ui_dispatch_view = flashtimeline
search = | metadata type=hosts | eval hoursAgo=round((now()-lastTime)/3600,1) | search hoursAgo>24 hoursAgo<168  | sort -lastTime | convert timeformat="%Y-%m-%d %H:%M:%S" ctime(lastTime) as lastHeardFrom | table host,lastHeardFrom,hoursAgo
vsid = gl2oj1qi

[JMTTI]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = `jmtti`
vsid = *:gllf8nkq

[SMTTI]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = `smtti(14)`
vsid = *:gll5sxqb

[EL]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = `el`
vsid = *:gllf7frb

[updateJobsLookup]
action.email.inline = 1
action.email.reportServerEnabled = 0
alert.suppress = 0
alert.suppress.period = h
alert.track = 0
cron_schedule = */5 * * * *
displayview = flashtimeline
enableSched = 1
request.ui_dispatch_view = flashtimeline
description = Updates the jobs lookup file with jobs since it was last written
search = [ | inputlookup jobs.csv.gz | head 1 | eval query="etype=jobstart _time>" . start | fields + query | format] | eval starttime=strftime(start, "%Y-%m-%d %H:%M:%S") | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | makemv delim="," nodes | mvexpand nodes | dedup job start nodes | eval node=nodes | fields +  starttime,start,job,user,node,nnodes | inputlookup append=TRUE max=9999999 jobs.csv.gz | outputlookup max=9999999 jobs.csv.gz
vsid = gm55nug0

[resetJobsLookup]
action.email.inline = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 0
cron_schedule = 2 0 1 * *
dispatch.earliest_time = -3mon@mon
displayview = flashtimeline
enableSched = 1
description = Reset the jobs lookup file to contain only the last three months of jobs
search = etype=jobstart | eval starttime=strftime(start, "%Y-%m-%d %H:%M:%S") | fields - _raw _cd _kv _serial _si _sourcetype _indextime _time | makemv delim="," nodes | mvexpand nodes | dedup job start nodes | eval node=nodes | fields +  starttime,start,job,user,node,nnodes | outputlookup max=9999999 jobs.csv.gz
vsid = *:mgl6bktw

[hourlyCountByHost]
action.email.inline = 1
action.summary_index = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 0
cron_schedule = 1 * * * *
dispatch.earliest_time = -1h@h
dispatch.latest_time = -1m
enableSched = 1
realtime_schedule = 0
search = sourcetype=syslog | stats count by host

[dailyCountByHost]
action.email.inline = 1
action.summary_index = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 0
cron_schedule = 10 0 * * *
dispatch.earliest_time = -1d@d
dispatch.latest_time = -10m
enableSched = 1
realtime_schedule = 0
search = index=summary search_name=hourlyCountByHost | stats sum(count) as count by orig_host

[StateChange]
action.email.inline = 1
action.email.reportServerEnabled = 0
action.summary_index = 1
alert.suppress = 0
alert.track = 1
cron_schedule = 0 * * * *
displayview = flashtimeline
enableSched = 1
realtime_schedule = 0
request.ui_dispatch_view = flashtimeline
search = [search index=summary nodeStateList | head 1 | eval query="(_time="._time." index=summary nodeStateList) OR (_time>"._time." tag=state)" | fields + query] | statechange
vsid = gmzlcktt

[SystemUptime]
action.email.inline = 1
action.email.reportServerEnabled = 0
action.summary_index = 1
alert.suppress = 0
alert.suppress.period = h
alert.track = 1
cron_schedule = 30 0 * * *
displayview = flashtimeline
enableSched = 1
realtime_schedule = 0
request.ui_dispatch_view = flashtimeline
search = `systemUptimeYesterday()`
vsid = gn0jm1pu

[nodeStateCounts]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index=summary nodeStateChange | dedup _time | sort _time | nointerpolate | chart max(USR) AS ProductionUptime max(ERR) AS UnscheduledDowntime by _time
vsid = *:gn0u1h6i

[nodeStateCounts2]
action.email.reportServerEnabled = 0
alert.track = 1
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index=summary nodeStateChange | dedup _time | chart max(USR) AS ProductionUptime max(ERR) AS UnscheduledDowntime by _time
vsid = *:gn0u1h6i
